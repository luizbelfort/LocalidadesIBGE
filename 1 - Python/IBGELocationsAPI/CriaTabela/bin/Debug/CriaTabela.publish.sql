/*
Deployment script for DBLocaisIBGE

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "DBLocaisIBGE"
:setvar DefaultFilePrefix "DBLocaisIBGE"
:setvar DefaultDataPath "C:\Program Files\Microsoft SQL Server\MSSQL15.SQLEXPRESS\MSSQL\DATA\"
:setvar DefaultLogPath "C:\Program Files\Microsoft SQL Server\MSSQL15.SQLEXPRESS\MSSQL\DATA\"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [$(DatabaseName)];


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET ANSI_NULLS ON,
                ANSI_PADDING ON,
                ANSI_WARNINGS ON,
                ARITHABORT ON,
                CONCAT_NULL_YIELDS_NULL ON,
                QUOTED_IDENTIFIER ON,
                ANSI_NULL_DEFAULT ON,
                CURSOR_DEFAULT LOCAL,
                RECOVERY FULL 
            WITH ROLLBACK IMMEDIATE;
    END


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET PAGE_VERIFY NONE 
            WITH ROLLBACK IMMEDIATE;
    END


GO
ALTER DATABASE [$(DatabaseName)]
    SET TARGET_RECOVERY_TIME = 0 SECONDS 
    WITH ROLLBACK IMMEDIATE;


GO
IF EXISTS (SELECT 1
           FROM   [master].[dbo].[sysdatabases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET QUERY_STORE (QUERY_CAPTURE_MODE = ALL, CLEANUP_POLICY = (STALE_QUERY_THRESHOLD_DAYS = 367), MAX_STORAGE_SIZE_MB = 100) 
            WITH ROLLBACK IMMEDIATE;
    END


GO
PRINT N'Rename refactoring operation with key 82939ffb-28dd-4629-86a1-6941ea9b4931 is skipped, element [dbo].[Table1].[Id] (SqlSimpleColumn) will not be renamed to Idlocalidade';


GO
PRINT N'Rename refactoring operation with key 4364b94d-8449-405f-9345-1273e2ff2135 is skipped, element [dbo].[Table1].[nome] (SqlSimpleColumn) will not be renamed to nomelocalidade';


GO
PRINT N'Rename refactoring operation with key a1c25f92-e1b3-4031-b1d8-a62adf4daad5, 44089031-89ee-412f-afb3-e9ea7bbefc6b, b82e4e7f-8172-48d7-b18b-4de1e1e20a64, 23634d29-80e9-492e-9ded-29951f91533c is skipped, element [dbo].[Table1].[municipio] (SqlSimpleColumn) will not be renamed to idmunicipio';


GO
PRINT N'Rename refactoring operation with key d65bf1f0-c54c-44ff-a245-049d80291a5e is skipped, element [dbo].[Table1].[nomemicroregiao] (SqlSimpleColumn) will not be renamed to nomemunicipio';


GO
PRINT N'Rename refactoring operation with key 1643e191-b6f5-4b7e-910a-903a4e01338a, 036d0b35-a9dc-48d6-9be6-4af5ce2b5707 is skipped, element [dbo].[Table1].[iduf] (SqlSimpleColumn) will not be renamed to idufmesoregiao';


GO
PRINT N'Rename refactoring operation with key c90c04e9-6243-46a7-82fd-981a312c5b9f, ca6ca3c7-cfde-4d15-a2b5-0113d242efab is skipped, element [dbo].[Table1].[siglauf] (SqlSimpleColumn) will not be renamed to siglaufmesoregiao';


GO
PRINT N'Rename refactoring operation with key 81b8e9f3-86e3-4612-999d-f46ec48a2765, 3d99a5ec-db64-47dd-832f-b7117bf6575d is skipped, element [dbo].[Table1].[nomeuf] (SqlSimpleColumn) will not be renamed to nomeufmesoregiao';


GO
PRINT N'Rename refactoring operation with key b88af2c9-395e-4014-94aa-daa1847d3706 is skipped, element [dbo].[Table1].[idregiao] (SqlSimpleColumn) will not be renamed to idregiaoUFmesoregiao';


GO
PRINT N'Rename refactoring operation with key 8ae00474-04d0-4be1-b936-f990555bddc4 is skipped, element [dbo].[Table1].[siglaregiao] (SqlSimpleColumn) will not be renamed to siglaregiaoUFmesoregiao';


GO
PRINT N'Rename refactoring operation with key 33bb4886-e4b5-4237-b35b-0816dce18fea is skipped, element [dbo].[Table1].[nomeregiao] (SqlSimpleColumn) will not be renamed to nomeregiaoUFmesoregiao';


GO
PRINT N'Rename refactoring operation with key 150e6a9f-8ef3-45c6-b683-f2f0f0810d05 is skipped, element [dbo].[Table1].[nomeregiaoUFregiaointermediaria] (SqlSimpleColumn) will not be renamed to siglaregiaoUFregiaointermediaria';


GO
PRINT N'Creating [dbo].[Table1]...';


GO
CREATE TABLE [dbo].[Table1] (
    [Idlocalidade]                     NVARCHAR (10) NOT NULL,
    [nomelocalidade]                   NVARCHAR (50) NOT NULL,
    [idmunicipio]                      NVARCHAR (50) NOT NULL,
    [nomemunicipio]                    NVARCHAR (50) NULL,
    [idmicroregiao]                    NVARCHAR (50) NULL,
    [nomemicroregiao]                  NVARCHAR (50) NULL,
    [idmesoregiao]                     NVARCHAR (50) NULL,
    [nomemesoregiao]                   NVARCHAR (50) NULL,
    [idufmesoregiao]                   NVARCHAR (10) NULL,
    [siglaufmesoregiao]                NVARCHAR (10) NULL,
    [nomeufmesoregiao]                 NVARCHAR (50) NULL,
    [idregiaoUFmesoregiao]             NVARCHAR (10) NULL,
    [siglaregiaoUFmesoregiao]          NVARCHAR (10) NULL,
    [nomeregiaoUFmesoregiao]           NVARCHAR (50) NULL,
    [idregiaoimediata]                 NVARCHAR (10) NULL,
    [nomeregiaoimediata]               NVARCHAR (50) NULL,
    [idregiaointermediaria]            NVARCHAR (10) NULL,
    [nomeregiaointermediaria]          NVARCHAR (50) NULL,
    [idufregiaointermediaria]          NVARCHAR (10) NULL,
    [siglaufregiaointermediaria]       NVARCHAR (50) NULL,
    [nomeufregiaointermediaria]        NVARCHAR (50) NULL,
    [idregiaoUFregiaointermediaria]    NVARCHAR (10) NULL,
    [siglaregiaoUFregiaointermediaria] NVARCHAR (10) NULL,
    [nomeregiaoUFregiaointermediaria]  NVARCHAR (50) NULL,
    PRIMARY KEY CLUSTERED ([Idlocalidade] ASC)
);


GO
-- Refactoring step to update target server with deployed transaction logs

IF OBJECT_ID(N'dbo.__RefactorLog') IS NULL
BEGIN
    CREATE TABLE [dbo].[__RefactorLog] (OperationKey UNIQUEIDENTIFIER NOT NULL PRIMARY KEY)
    EXEC sp_addextendedproperty N'microsoft_database_tools_support', N'refactoring log', N'schema', N'dbo', N'table', N'__RefactorLog'
END
GO
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '82939ffb-28dd-4629-86a1-6941ea9b4931')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('82939ffb-28dd-4629-86a1-6941ea9b4931')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '4364b94d-8449-405f-9345-1273e2ff2135')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('4364b94d-8449-405f-9345-1273e2ff2135')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'a1c25f92-e1b3-4031-b1d8-a62adf4daad5')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('a1c25f92-e1b3-4031-b1d8-a62adf4daad5')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '44089031-89ee-412f-afb3-e9ea7bbefc6b')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('44089031-89ee-412f-afb3-e9ea7bbefc6b')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'b82e4e7f-8172-48d7-b18b-4de1e1e20a64')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('b82e4e7f-8172-48d7-b18b-4de1e1e20a64')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '23634d29-80e9-492e-9ded-29951f91533c')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('23634d29-80e9-492e-9ded-29951f91533c')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'd65bf1f0-c54c-44ff-a245-049d80291a5e')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('d65bf1f0-c54c-44ff-a245-049d80291a5e')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '1643e191-b6f5-4b7e-910a-903a4e01338a')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('1643e191-b6f5-4b7e-910a-903a4e01338a')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'c90c04e9-6243-46a7-82fd-981a312c5b9f')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('c90c04e9-6243-46a7-82fd-981a312c5b9f')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '81b8e9f3-86e3-4612-999d-f46ec48a2765')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('81b8e9f3-86e3-4612-999d-f46ec48a2765')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '036d0b35-a9dc-48d6-9be6-4af5ce2b5707')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('036d0b35-a9dc-48d6-9be6-4af5ce2b5707')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'ca6ca3c7-cfde-4d15-a2b5-0113d242efab')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('ca6ca3c7-cfde-4d15-a2b5-0113d242efab')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '3d99a5ec-db64-47dd-832f-b7117bf6575d')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('3d99a5ec-db64-47dd-832f-b7117bf6575d')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = 'b88af2c9-395e-4014-94aa-daa1847d3706')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('b88af2c9-395e-4014-94aa-daa1847d3706')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '8ae00474-04d0-4be1-b936-f990555bddc4')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('8ae00474-04d0-4be1-b936-f990555bddc4')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '33bb4886-e4b5-4237-b35b-0816dce18fea')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('33bb4886-e4b5-4237-b35b-0816dce18fea')
IF NOT EXISTS (SELECT OperationKey FROM [dbo].[__RefactorLog] WHERE OperationKey = '150e6a9f-8ef3-45c6-b683-f2f0f0810d05')
INSERT INTO [dbo].[__RefactorLog] (OperationKey) values ('150e6a9f-8ef3-45c6-b683-f2f0f0810d05')

GO

GO
PRINT N'Update complete.';


GO
